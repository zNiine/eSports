<!DOCTYPE html>
<html>

<head>
  <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
  <style type="text/css">

  body{
  background-image: url("Images/b4.png");
  height: 100%;

  /* Center and scale the image nicely */
  background-position: center;

 text-transform: uppercase;
    font-family: League Gothic, Lato, Arial Black;
  }

  #containerrrr{
  width: 1415px;
    margin: auto;


  }
  #header{
    display: block;
    height: 80px;
    width: 100%;
    border-bottom-radius: 10px;
    background-color:  #333333;
    position: fixed;
    top: 0;
    left: 0;
    font-size: 35px;


  }

  #username{
    color: white;
    font-size: 50px;
    margin-left: 50px;
    margin-top: 10px;
    display: block;
  }

  #menu{
    color: white;
    font-size: 20px;
    margin-top: 20px;
    margin-left: 20px;
  }

  #usersearch{
    background-color: #333333;
    height: 30px;
    width: 220px;
    display: block;
    margin-top: -28px;
    border-radius: 20px;
    margin-right: 108px;
    color: white;
    border: 1px solid white;
    text-align: left;
    padding-left: 10px;
    font-size: 30px;
    float: right;
  }


  #pp{
    float: right;
    margin-top: -46px;
    margin-right: 20px;
  }

#a{
  float: right;
  margin-top: -46px;
  margin-right: 40px;
}

#m{
  float: right;
  margin-top: -46px;
  margin-right: 40px;
}

#b
{
  float: right;
  margin-top: -46px;
  margin-right: 40px;
}

/* Dropdown Button */
.dropbtn {
    background-color: #3498DB;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
}

/* Dropdown button on hover & focus */
.dropbtn:hover, .dropbtn:focus {
    background-color: #2980B9;
}

/* The container <div> - needed to position the dropdown content */
.dropdown {
    position: relative;
    display: inline-block;
}

/* Dropdown Content (Hidden by Default) */
.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

/* Links inside the dropdown */
.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

/* Change color of dropdown links on hover */
.dropdown-content a:hover {background-color: #ddd}

/* Show the dropdown menu (use JS to add this class to the .dropdown-content container when the user clicks on the dropdown button) */
.show {display:block;}

#myDropdown{
  display: block;
  margin-top: -38px;

  margin-left: 752px;

width: 238px;

  float: right;
}


#left{
  height: 700px%;
  width: 26.5%;
  display: block;
  color: white;
  float: left;
  margin-top: 80px;
  border-top-left-radius: 10px;
    border-top-right-radius: 10px;
}

#upleft{
  height: 350px;
  width: 99.9%;
  display: block;
  background-color:  #f2f2f2;
  float: left;
  font-weight: bold;
  border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    color: black;

    overflow: scroll;
}

#botleft{
  height: 250px;
  float: left;
  width: 99.9%;
  color: black;
  display: block;
  border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
  background-color:  #f2f2f2
;
  margin-top: 2px;
}

#center{
margin-top: 80px;
margin-left: 5px;
  height: 450px;
  width: 25.9%;
  display: block;
  background-color:  #f2f2f2
;
  float: left;
  color: black;
  border-radius: 10px;
}

#right{

  margin-top: 80px;
  margin-left: 5px;
    height: 600px;
    width: 35.9%;
    display: block;
    background-color:  #f2f2f2;
    float: left;
    border-radius: 10px;
    color: black;
}

#ff{
  width: 100%;
  height: 550px;
    border-bottom: 1px solid white;
    overflow: scroll;


}

#usertype{
  background-color: #333333;
  height: 30px;
  width: 80%;
  display: block;
margin-top: 10px;
  border-radius: 10px;

  color: white;
  border: 1px solid white;
  text-align: left;
  padding-left: 10px;
  font-size: 30px;


}

#usertypetype{
  background-color: #333333;
  height: 30px;
  width: 80%;
  display: block;
margin-top: 10px;
  border-radius: 10px;

  color: white;
  border: 1px solid white;
  text-align: left;
  padding-left: 10px;
  font-size: 30px;
}

#post{
  background-color:  #333333; /* Green */
border-style: 1px;
border-color: white;
color: white;
display: block;
float:right;
padding: 5px 10px;
text-align: center;

margin-top: -34px;
margin-right: 10px;
font-size: 20px;
font-family: sans-serif;
border-radius: 10px;
}

#postt{
  background-color:  #333333; /* Green */
border-style: 1px;
border-color: white;
color: white;
display: block;
float:right;
padding: 5px 10px;
text-align: center;

margin-top: -34px;
margin-right: 0px;
font-size: 20px;
font-family: sans-serif;
border-radius: 10px;

}
#botbot{
  height: 170px;
  overflow: scroll;
  width: 100%;
  display: block;
  text-transform: none;

}

#bottop{
  height: 30px;
  width: 100%;
  display: block;
  color: white;
  text-align: center;
  background-color: #333333;


}
#botbotbot{


}

#texttext{
  font-size: 20px;


}

#textdate{
  font-size: 25px;
  color: white;
  text-align: right;
  float: right;
  margin-right: 10px;
  margin-top: 14px;
}

#postname{
  font-size: 25px;
  margin-left: 40px;


}

a:link {
    color: white;
    text-decoration: none;
}

/* visited link */
a:visited {
    color: white;
    text-decoration: none;

}

/* mouse over link */
a:hover {
    color: white;
    text-decoration: none;
}

/* selected link */
a:active {
    color: white;
    text-decoration: none;
}


  </style>

  <script type="text/javascript">
var userID;
var usname;


  function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
    var imgg = document.createElement('imgg');
      var firebaseref = firebase.database().ref();
      var database = firebase.database();
      var usertext = document.getElementById("usersearch").value;
      database.ref('/Users/').on('value',function(snap) {
          unames = [];
                  snap.forEach(function(item) {
                  var usernames = item.val();
                  var length = usertext.length;
                  var newuser = usernames.name.toString();
                  var newnew = newuser.slice(0, length);
                    if(usertext == "")
                    {
                      unames = [];

                    }
                    else if(usertext.toLowerCase() == newnew.toLowerCase()){
                    unames.push(usernames);


                  }



                })
 document.getElementById("myDropdown").innerHTML = "";

     var tbl = document.createElement('table');

    for(var i = 0; i < unames.length; i++){

      var row = tbl.insertRow(i);
      row.style.backgroundColor = "#1aa0e0";
      row.style.height = "50px";
      row.style.width = "700px";
      row.style.borderRadius = "25px";
      var cell1 = row.insertCell(0);
      cell1.style.width = "700px";
        cell1.style.borderRadius = "25px";
        cell1.style.fontSize = "40px";
        cell1.style.fontFamily = "sans-serif";
        var img = document.createElement('img');
        img.src = unames[i].pic;
        img.style.height = "50px";
        img.style.width = "50px";
        img.style.float = "left";
        img.style.borderColor = "white";
        img.style.borderWidth = "Thick";
      cell1.innerHTML = unames[i].name;
      cell1.style.textAlign = "center";
      cell1.id = unames[i].id;
      otheruserID = unames[i].id;
      cell1.onclick = function () {
                  userNameTableText(this);
            };
    cell1.appendChild(img);
    cell1.appendChild(imgg);
      var div = document.getElementById('myDropdown');
         div.appendChild(tbl);


    }

              })




}



//  userID = firebase.auth().currentUser.uid;


// Close the dropdown menu if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {

    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
var picpicpic;

function userNameTableText(d){
  var otheruserID = d.id;
  firebase.database().ref(userID).update({

  default: d.id,
});

window.location.href = "other.htm";

}
function load(){
  var firebaseref = firebase.database().ref();
  var database = firebase.database();



      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {

          // User is signed in.
        userID = firebase.auth().currentUser.uid;

        var trylq = firebase.database().ref().child(userID + '/name/');
        trylq.on('value', function(snapshot) {
          usname = snapshot.val();
          document.getElementById("usersearch").placeholder = usname;

        });

        var instant = firebase.database().ref().child(userID + '/instant/');
        instant.on('value', function(snapshot) {
          var instant = snapshot.val();






        });


        var earningsq = firebase.database().ref().child(userID + '/pic/');
        earningsq.on('value', function(snapshot) {
          picpicpic = snapshot.val();
          document.getElementById("pp").src = picpicpic;




        });

newal();
      }
    else{
window.location.href = "signin.htm";


    }});


}


function newal(){
    var database = firebase.database();


    var postfill = [];

          database.ref('/NGEBoard/').on('value', function(snap) {

            snap.forEach(function(item) {
              postfill.unshift(item.val());
            }

          )
lololol(postfill);





          });







}


function lololol(postfill){
                var checkcheck = 0;
                var postfill = postfill;
                  document.getElementById("ff").innerHTML = "";
                  var posttable = document.createElement('table');
                  for(var i = 0; i < postfill.length; i++){
                    var row = posttable.insertRow(checkcheck);
                    row.style.backgroundColor = "purple";
                    row.style.height = "140px";
                    row.style.width = "300px";
                    checkcheck++;
                    var cell1 = row.insertCell(0);
                    cell1.colspan = "2";
                    cell1.style.width = "300px";
                    cell1.style.height = "140px";
                    cell1.style.borderBottomLeftRadius = "0px";
                          cell1.style.borderBottomRightRadius = "0px";
                          cell1.style.borderTopLeftRadius = "25px";
                                cell1.style.borderTopRightRadius = "25px";
                      cell1.style.fontSize = "40px";
                      cell1.style.fontFamily = "sans-serif";
                      var img = document.createElement('img');
                      img.src = postfill[i].pic;
                      img.style.height = "100px";
                      img.style.width = "100px";
                      img.style.float = "left";
                      img.style.borderColor = "white";
                      img.style.borderWidth = "Thick";
                      var sspan = document.createElement('span');
                      sspan.innerHTML =  postfill[i].message;
                      sspan.style.fontSize = "10px";
                      sspan.style.color = "blue";
                      sspan.id = "textext";
                                    //cell1.style.textAlign = "center";
                    cell1.id = postfill[i].id;
                  //  cell1.onclick = function () {
                  //            tableText(this);
                    //      };

                                  var row2 = posttable.insertRow(checkcheck);
                                      checkcheck++;
                                        var cell2 = row2.insertCell(0);
                                      row2.style.height = "30px";
                                      row2.style.width = "300px";
                                      row2.style.backgroundColor = "purple";
                                      cell2.style.width = "30px";
                                      cell2.style.height = "30px";
                                        cell2.style.borderBottomLeftRadius = "25px";
                                              cell2.style.borderBottomRightRadius = "25px";
                                              cell2.style.textAlign = "center";
                                              cell2.style.color = "white";
                                              cell2.style.textAlign = "center";
                                                cell2.onclick = function () {
                                                         goodluck(postfill[i]);
                                                      };
                                              cell2.innerHTML = '<span style="text-align: center;" id="votes"> Comments: ' + postfill[i].comments+'  </span>';
                  cell1.appendChild(img);
                        cell1.innerHTML += "<strong>" + '<span id="postname"> ' + postfill[i].name + '</span>' + "</strong>" + "&nbsp&nbsp&nbsp" +'<span id="textdate">' + postfill[i].time + '</span>'+ "<br />" + '<span id="texttext">' + sspan.innerHTML + '</span>';
            //sspan.
                    var div = document.getElementById('ff');
                       div.appendChild(posttable);



  }

}


function fillwindwow(){
  var database = firebase.database();
var postfill = [];
  database.ref(userID + '/posts/').on('value',function(snap) {
      postfill = [];
              snap.forEach(function(item) {
              var droptop = item.val();
                postfill.push(droptop);
            })
            document.getElementById("ff").innerHTML = "";

             var tbl = document.createElement('table');
             var l = 0;
            for(var i = postfill.length -1; i > 0; i--){
var header = tbl.createTHead();


              var row = header.insertRow(l);
              row.style.backgroundColor = "#1aa0e0";
              row.style.height = "100px";
              row.style.width = "700px";
              l++

              var cell1 = row.insertCell(0);

              cell1.colspan = "2";
              cell1.style.width = "700px";
              cell1.style.height = "100px";
              cell1.style.borderBottomLeftRadius = "0px";
                    cell1.style.borderBottomRightRadius = "0px";
                    cell1.style.borderTopLeftRadius = "25px";
                          cell1.style.borderTopRightRadius = "25px";
                cell1.style.fontSize = "40px";
                cell1.style.fontFamily = "sans-serif";
                var img = document.createElement('img');
                img.src = postfill[i].pic;
                img.style.height = "100px";
                img.style.width = "100px";
                img.style.float = "left";
                img.style.borderColor = "white";
                img.style.borderWidth = "Thick";

                var sspan = document.createElement('span');
                sspan.innerHTML =  postfill[i].message;
                sspan.style.fontSize = "10px";
                sspan.style.color = "blue";
                sspan.id = "textext";

                              //cell1.style.textAlign = "center";
              cell1.id = postfill[i].id;
            //  cell1.onclick = function () {
            //            tableText(this);
              //      };



                                var row2 = header.insertRow(l);
                                l++;
                                  var cell2 = row2.insertCell(0);

                                row2.style.height = "30px";
                                row2.style.width = "700px";
                                row2.style.backgroundColor = "#1aa0e0";
                                cell2.style.width = "350px";
                                cell2.style.height = "30px";
                                  cell2.style.borderBottomLeftRadius = "25px";
                                        cell2.style.borderBottomRightRadius = "25px";
                                        cell2.style.textAlign = "center";
                                        cell2.style.color = "white";
                                        cell2.style.textAlign = "center";
                                          cell2.onclick = function () {
                                                   goodluck(postfill[i]);
                                                };
                                        cell2.innerHTML = '<span style="float: left; margin-left: 10px;" id="votes"> Votes: '+ postfill[i].votes + '</span><strong>Extend</strong>' + '<span style="float: Right; margin-right: 10px;" id="votes"> Comments: ' + postfill[i].comments+'  </span>';


            cell1.appendChild(img);
                  cell1.innerHTML += "<strong>" + '<span id="postname"> ' + postfill[i].username + '</span>' + "</strong>" + "&nbsp&nbsp&nbsp" +'<span id="textdate">' + postfill[i].date + '</span>'+ "<br />" + '<span id="texttext">' + sspan.innerHTML + '</span>';

//sspan.
              var div = document.getElementById('ff');
                 div.appendChild(tbl);



            }
          })

}



  function free(){
    var database = firebase.database();
    document.getElementById("upleft").innerHTML = '';
    database.ref('/FreeAgent/').on('value', function(snap) {
      var fa = [];
      snap.forEach(function(item) {


        fa.unshift(item.val());
      })


        var fatable = document.createElement('table');
        var d = new Date();
        var n = d.getTime();

        for(var i = 0; i < fa.length; i++){

          if(n - fa[i].time < 604800000)
          {


            var row = fatable.insertRow(i);
          //  row.style.backgroundColor = "#272067";
            row.style.height = "100px";
            row.style.width = "700px";
            var cell1 = row.insertCell(0);
            cell1.colspan = "2";
            cell1.style.borderBottom = "2px solid black";
            cell1.style.width = "700px";
            cell1.style.height = "100px";
        //    cell1.style.borderRadius = "20px";
  var che;
            if(n - fa[i].time < 3600000)
            {


              var today = new Date();
              var ss = fa[i].time;
  var da = new Date(ss);
  var diffMs = (today - da); // milliseconds between now & then
  var diffDays = Math.floor(diffMs / 86400000); // days
  var diffHrs = Math.floor((diffMs % 86400000) / 3600000); // hours
  var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000);


            che = diffMins + " Minutes ago"  ;
            }
            else if(n - fa[i].time < 86400000)
            {
                var today = new Date();
              var ss = fa[i].time;
              var da = new Date(ss);
              var diffMs = (today - da); // milliseconds between now & then
              var diffDays = Math.floor(diffMs / 86400000); // days
              var diffHrs = Math.floor((diffMs % 86400000) / 3600000); // hours
              var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000);
              che = diffHrs + " Hour(s) and " + diffMins + " Minute(s) ago" ;
            }
            else if(n - fa[i].time > 86400000)
            {
                var today = new Date();
                var ss = fa[i].time;
                var da = new Date(ss);
                var diffMs = (today - da); // milliseconds between now & then
                var diffDays = Math.floor(diffMs / 86400000); // days
                var diffHrs = Math.floor((diffMs % 86400000) / 3600000); // hours
                var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000);

              che = diffDays + " Day(s) and " + diffHrs + " hours ago"  ;
            }
            else if(n - fa[i].time < 432,000,000)
            {
              che = "Less than 5 day ago"  ;
            }
            else if(n - fa[i].time < 518,400,000)
            {
                che = "Less than 6 day ago"  ;
            }

              cell1.style.fontSize = "20px";
              cell1.id = fa[i].id;
              cell1.onclick = function () {
                      newtableText(this);
                    };


              cell1.style.fontFamily = "sans-serif";
                  cell1.innerHTML += "Name: " + fa[i].name + '<span style="float: right">' + "PSN: "  +fa[i].psn + '</span>' + "<br />Role: " + fa[i].role + '<span style="float: right">' + che + '</span>' ;
              //sspan.
                var div = document.getElementById('upleft');
                   div.appendChild(fatable);


          }

      }

    })
  }

function newtableText(d){
  var d;
  firebase.database().ref(userID).update({

  default: d.id,
});

window.location.href = "other.htm";

}


function scrims(){
  document.getElementById("upleft").innerHTML = '<button onclick="create();"> Create Scrim </button>';


  var database = firebase.database();
  database.ref('/ScrimFinder/').on('value', function(snap) {
    var fa = [];
    snap.forEach(function(item) {


      fa.unshift(item.val());
    })


      var fatable = document.createElement('table');
      var d = new Date();
      var n = d.getTime();

      for(var i = 0; i < fa.length; i++){

        if(n - fa[i].time < 604800000)
        {


          var row = fatable.insertRow(i);
        //  row.style.backgroundColor = "#272067";
          row.style.height = "100px";
          row.style.width = "700px";
          var cell1 = row.insertCell(0);
          cell1.colspan = "2";
          cell1.style.borderBottom = "2px solid black";
          cell1.style.width = "700px";
          cell1.style.height = "100px";
      //    cell1.style.borderRadius = "20px";
var che;
          if(n - fa[i].time < 3600000)
          {


            var today = new Date();
            var ss = fa[i].time;
var da = new Date(ss);
var diffMs = (today - da); // milliseconds between now & then
var diffDays = Math.floor(diffMs / 86400000); // days
var diffHrs = Math.floor((diffMs % 86400000) / 3600000); // hours
var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000);


          che = diffMins + " Minutes ago"  ;
          }
          else if(n - fa[i].time < 86400000)
          {
              var today = new Date();
            var ss = fa[i].time;
            var da = new Date(ss);
            var diffMs = (today - da); // milliseconds between now & then
            var diffDays = Math.floor(diffMs / 86400000); // days
            var diffHrs = Math.floor((diffMs % 86400000) / 3600000); // hours
            var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000);
            che = diffHrs + " Hour(s) and " + diffMins + " Minute(s) ago" ;
          }
          else if(n - fa[i].time > 86400000)
          {
              var today = new Date();
              var ss = fa[i].time;
              var da = new Date(ss);
              var diffMs = (today - da); // milliseconds between now & then
              var diffDays = Math.floor(diffMs / 86400000); // days
              var diffHrs = Math.floor((diffMs % 86400000) / 3600000); // hours
              var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000);

            che = diffDays + " Day(s) and " + diffHrs + " hours ago"  ;
          }
          else if(n - fa[i].time < 432,000,000)
          {
            che = "Less than 5 day ago"  ;
          }
          else if(n - fa[i].time < 518,400,000)
          {
              che = "Less than 6 day ago"  ;
          }

            cell1.style.fontSize = "20px";
            cell1.id = fa[i].id;
            cell1.data = fa[i].poster;
            if(fa[i].poster == userID)
            {
              cell1.style.color= "red";
            }
            cell1.onclick = function () {
                    tableText(this);
                  };
            cell1.style.fontFamily = "sans-serif";
                cell1.innerHTML += "HP/SnD/CTF: " + fa[i].hp + "/" + fa[i].snd + "/" + fa[i].ctf + '<span style="float: right">' +fa[i].tier + '</span>' + '<span style="float:left;">'+ fa[i].rule +  '</span><span style="float:right;">' + che +'</span>';
            //sspan.
              var div = document.getElementById('upleft');
                 div.appendChild(fatable);


        }

    }

  })




}

function run(t){

  var i;



  i = t;

  var tryllq = firebase.database().ref().child(i + '/name/');
  tryllq.on('value', function(snapshot) {
    var uu = snapshot.val();
    document.getElementById("bottop").innerHTML = uu;

  });


  document.getElementById("botbot").innerHTML = "";
  var database = firebase.database();

  oomessage = i;
  //document.getElementById("usertypee").style.visibility = "visible";
  //  document.getElementById("typesendd").style.visibility = "visible";
  //var newuserkey = firebase.database().ref().child('/Messages/' + t + '/' + userID).push().key;
    //var otheruserkey = firebase.database().ref().child('/Messages/' + userID + '/' + t).push().key;
    database.ref('/Messages/' + userID + '/' + i).on('value', function(snap) {
var me = [];
      snap.forEach(function(item) {
        me.push(item.val());
      })
      setTimeout(function() { lollol(me); }, 30);


    });




}
function ruunn(t){

  var i;



  i = t.id;

  var tryllq = firebase.database().ref().child(i + '/name/');
  tryllq.on('value', function(snapshot) {
    var uu = snapshot.val();
    document.getElementById("bottop").innerHTML = uu;

  });


  document.getElementById("botbot").innerHTML = "";
  var database = firebase.database();

  oomessage = i;
  //document.getElementById("usertypee").style.visibility = "visible";
  //  document.getElementById("typesendd").style.visibility = "visible";
  //var newuserkey = firebase.database().ref().child('/Messages/' + t + '/' + userID).push().key;
    //var otheruserkey = firebase.database().ref().child('/Messages/' + userID + '/' + t).push().key;
    database.ref('/Messages/' + userID + '/' + i).on('value', function(snap) {
var me = [];
      snap.forEach(function(item) {
        me.push(item.val());
      })
      setTimeout(function() { lollol(me); }, 30);


    });




}


function lollol(d){
  var postfill = d;
  var checkcheck = 0;

    document.getElementById("botbot").innerHTML = "";
    var posttable = document.createElement('table');
    for(var i = 0; i < postfill.length; i++){

      var row = posttable.insertRow(checkcheck);

      row.style.height = "30px";
      row.style.width = "700px";
      checkcheck++;
      var cell1 = row.insertCell(0);
      cell1.colspan = "2";
      cell1.style.width = "700px";
      cell1.style.height = "40px";
      cell1.style.borderBottomLeftRadius = "0px";
            cell1.style.borderBottomRightRadius = "0px";
            cell1.style.borderTopLeftRadius = "25px";
                  cell1.style.borderTopRightRadius = "25px";
        cell1.style.fontSize = "20px";
        cell1.style.fontFamily = "sans-serif";
        cell1.innerHTML = postfill[i].text;
row.style.backgroundColor = "#1aa0e0";
if(postfill[i].senderuserid == userID)
{
      cell1.style.borderBottomLeftRadius = "25px";
  row.style.backgroundColor = "#1aa0e0";
  cell1.style.textAlign = "Right";
}
else{
  row.style.backgroundColor = "green";
    cell1.style.textAlign = "Left";
    cell1.style.borderBottomRightRadius = "25px";
}

cell1.onclick = function(){

  if(postfill[0].senderuserid == userID)
  {

    cell1.id = postfill[0].otheruserID;
      ig(cell1.id);
  }
  else{
    row.style.backgroundColor = "green";
      cell1.style.textAlign = "Left";
      cell1.style.borderBottomRightRadius = "25px";
      cell1.id = postfill[0].senderuserid;
      ig(cell1.id);

  }




}
      var div = document.getElementById('botbot');
      div.scrollTop = div.scrollHeight;
         div.appendChild(posttable);

}

}
function ig(d){
  var d;
  firebase.database().ref(userID).update({

  default: d,
});

window.location.href = "other.htm";

}


function cc(){
var database = firebase.database();
  var h = document.getElementById("hardpoint");
  var hardpoint = h.options[h.selectedIndex].value;

  var s = document.getElementById("snd");
  var snd = s.options[s.selectedIndex].value;

  var c = document.getElementById("ctf");
  var ctf = c.options[c.selectedIndex].value;

  var r = document.getElementById("rule");
  var rul = r.options[r.selectedIndex].value;

  var t = document.getElementById("tier");
  var ti = t.options[t.selectedIndex].value;

  var d = new Date();
  var n = d.getTime();
  var newuserkey = firebase.database().ref().child('ScrimFinder/').push().key;
  firebase.database().ref('ScrimFinder/' + newuserkey).set({
    hp: hardpoint,
    snd: snd,
    ctf: ctf,
    rule: rul,
    tier:ti,
    poster: userID,
    time: n,
    postername: usname,
    id: newuserkey,
  });

scrims();
}



function send(){
  var usermessage = document.getElementById("usertypetype").value;
  document.getElementById("usertypetype").value = "";

  var firebaseref = firebase.database().ref();
  var database = firebase.database();


//var last2 = year.slice(-2);
//var last2 = year.toString().substr(year.length -2);


var sizecheck = usermessage.toLowerCase().search("font-size:");
var buttoncheck = usermessage.toLowerCase().search("</button>");


if(sizecheck != -1){
  alert("You can not change the size of your font. Use <Strong> to bold :)");

}
else if(buttoncheck != -1){
  alert("You can not add buttons. Use <a> to link :)");
}
else{
  var nnnnn;
  var cccc = firebase.database().ref().child(oomessage + '/name/');
  cccc.once('value', function(snapshot) {
    nnnnn = snapshot.val();


    var data =
    {
      senderusername: usname,
      senderuserid: userID,
      text: usermessage,
      recievername: nnnnn,
      recieverid: oomessage,


    }

//var newPostKey = firebase.database().ref().child(stupid.otheruserID + '/posts/').push().key;
//var userkey = firebase.database().ref().child(userID + '/posts/').push().key;
var newuserkey = firebase.database().ref().child('/Messages/' + userID + '/' + oomessage).push().key;
var other = firebase.database().ref().child('/Messages/' + oomessage + '/' + userID).push().key;



var updates = {};
var u = {};
//  updates[stupid.otheruserID + '/posts/' + newPostKey] = data;
//  updates[userID + '/posts/' + newPostKey] = data;
updates['/Messages/' + userID + '/' + oomessage + '/' + newuserkey] = data;
updates['/Messages/' + oomessage + '/' + userID + '/' + other] = data;


updates[userID + '/LastMessage/' + oomessage] = data;
updates[oomessage + '/LastMessage/' + userID] = data;

return firebase.database().ref().update(updates);
return firebase.database().ref().update(u);
run(oomessage);
  });
}
}

function posst(){


    var usermessage = document.getElementById("usertype").value;
    document.getElementById("usertype").value = "";

    var firebaseref = firebase.database().ref();
    var database = firebase.database();
    var d = new Date();
    var year = d.getFullYear();
    var month = d.getMonth();
    var date = d.getDate();
    var hours = d.getHours();
    var minutes = d.getMinutes();
    var datte;

  //var last2 = year.slice(-2);
  //var last2 = year.toString().substr(year.length -2);
  var last2 = year.toString().slice(-2);
  if(hours > 11)
  {
  //   datte = monthscript(month) + " " + date + " " + year + " " + hours + ":" + minutes + "pm";

     datte = hours - 12 + ":" + minutes + " " + "pm" +  " " + monthscript(month) + " " + date + " '" + last2 + " ";
  }
  else{
       datte = hours + ":" + minutes + "am"  + " " + monthscript(month) + " " + date + " '" + last2 + " ";
  }

  var sizecheck = usermessage.toLowerCase().search("font-size:");
  var buttoncheck = usermessage.toLowerCase().search("</button>");


  if(sizecheck != -1){
    alert("You can not change the size of your font. Use <Strong> to bold :)");

  }
  else if(buttoncheck != -1){
    alert("You can not add buttons. Use <a> to link :)");
  }
  else{


                var data =
                {
                  name: usname,
                  from: userID,
                  message: usermessage,
                  pic: picpicpic,
                  date: datte,
                  votes: 0,

                  comments: 0,


                }

  //var newPostKey = firebase.database().ref().child(stupid.otheruserID + '/posts/').push().key;
  //var userkey = firebase.database().ref().child(userID + '/posts/').push().key;
  var newuserkey = firebase.database().ref().child('/NGEBoard/').push().key;



  var updates = {};

  //  updates[stupid.otheruserID + '/posts/' + newPostKey] = data;
  //  updates[userID + '/posts/' + newPostKey] = data;
    updates['/NGEBoard/' + newuserkey] = data;

  return firebase.database().ref().update(updates);






  }

  location.reload();
  }


  function monthscript(month){
    var trolo = month + 1;
    switch(trolo){
                case 1:
                    return "January";
                    break;
                case 2:
                    return "February";
                    break;
                case 3:
                    return "March";
                    break;
                case 4:
                    return "April";
                    break;
                case 5:
                  return "May";
                    break;
                case 6:
                    return "June";
                    break;
                case 7:
                    return "July";
                    break;
                case 8:
                    return "August";
                    break;
                case 9:
                    return "September";
                    break;
                case 10:
                    return "October";
                    break;
                case 11:
                    return "November";
                    break;
                case 12:
                    return "December";
                    break;
                default:
                    monthName = "Invalid month";
                    break;


    }
  }


  function frag(){
    var database = firebase.database();
    var me = [];
    database.ref(userID + '/LastMessage/').on('value', function(snap) {
  var me = [];
      snap.forEach(function(item) {
        me.push(item.val());
      })
      setTimeout(function() { lolll(me); }, 30);


    });

  }

  function lolll(d)
  {

    var eh = d;
    var postfill = eh;
    document.getElementById("botbot").innerHTML = "";
    var posttable = document.createElement('table');
    var checkcheck = 0;


  for(var i = 0; i < postfill.length; i++){

      var row = posttable.insertRow(i);
  row.style.backgroundColor = "#1aa0e0";
      row.style.height = "50px";
      row.style.width = "700px";
      checkcheck++;
      var cell1 = row.insertCell(0);
      cell1.colspan = "2";
      cell1.style.width = "700px";
      cell1.style.height = "50px";
      cell1.style.borderBottomLeftRadius = "0px";
            cell1.style.borderBottomRightRadius = "0px";
            cell1.style.borderTopLeftRadius = "25px";
                  cell1.style.borderTopRightRadius = "25px";
        cell1.style.fontSize = "40px";
        cell1.style.fontFamily = "sans-serif";
        cell1.innerHTML = postfill[i].text;
  row.style.backgroundColor = "#1aa0e0";


  if(postfill[i].userid == userID)
  {
    //cell1.id = h;
    cell1.id = postfill[i].senderuserid;
    cell1.innerHTML = '<span style="color: white;">' + "<Strong> " + postfill[i].senderusername + "</span></Strong>" + '<span style="text-align: right;">' + postfill[i].text + '</span>';
    cell1.onclick = function () {

      ruunn(this);
          };
  }
  else{
    cell1.innerHTML = '<span style="color: white;">' + "<Strong> " + postfill[i].recievername + "</span></Strong>" + '<span style="text-align: right;">' + postfill[i].text + '</span>';
  cell1.id = postfill[i].recieverid;

    cell1.onclick = function () {
        ruunn(this);
          };
  }

      var div = document.getElementById('botbot');
         div.appendChild(posttable);

  }

  }

function alerts(){
  var alerts = [];
  document.getElementById("myDropdown").classList.toggle("show");
  var imgg = document.createElement('imgg');
    var firebaseref = firebase.database().ref();
    var database = firebase.database();

    database.ref(userID + '/alerts').on('value',function(snap) {
        alerts = [];
                snap.forEach(function(item){
                var usernames = item.val();
                  alerts.push(usernames);
                })
              })
  document.getElementById("myDropdown").innerHTML = "";

   var tbl = document.createElement('table');

  for(var i = 0; i < alerts.length; i++){

    var row = tbl.insertRow(i);
    row.style.backgroundColor = "#1aa0e0";
    row.style.height = "50px";
    row.style.width = "1000px";
    row.style.borderRadius = "25px";
    var cell1 = row.insertCell(0);
    cell1.style.width = "1000px";

    cell1.style.fontSize = "20px";
    cell1.style.fontFamily = "sans-serif";
    cell1.innerHTML = alerts[i].teamname + ' has sent you an invite to join their team ladder.';
    cell1.style.textAlign = "center";
    var accept = document.createElement("Button");
    accept.id = i;
    accept.innerHTML = "Accept";
    accept.onclick = function() { // Note this is a function
var updates = {};
updates[userID] = userID;
database.ref('Ladder/' + alerts[accept.id].ladderid + '/t/' + alerts[accept.id].teamid + '/roster/').update(updates);


  };

  var decline = document.createElement("Button");
  decline.innerHTML = "Decline";
  decline.onclick = function() { // Note this is a function
//database().ref.child(userID + '/alerts/' + alerts[accept.id].alertid).remove();
var adaRef = firebase.database().ref(userID + '/alerts/' + alerts[accept.id].alertid);
adaRef.remove()
  .then(function() {
    console.log("Remove succeeded.")
  })
  .catch(function(error) {
    console.log("Remove failed: " + error.message)
  });


};
var div = document.getElementById('myDropdown');
div.appendChild(accept);
div.appendChild(decline);


       div.appendChild(tbl);


  }





}
  </script>


</head>

<body onload="load();">

<div id="containerrrr">
  <div id="header">
    <!-- <div id="username">

    </div>
    <center>
    <img style="margin-top: -100px;" src="Images/ngelogo.png" height="150px;" width="150px;"/>
  </CENTER>
-->
<div id="menu">
Explore  &nbsp&nbsp&nbsp  <a href="comp.htm">Competetion</a> &nbsp&nbsp&nbsp Community &nbsp&nbsp&nbsp <span onclick="alerts();">Alerts</span>
<div id="rightmenu">


    <input onkeyup="myFunction()" id ="usersearch" placeholder="">
    <div class="dropdown">

      <div id="myDropdown" class="dropdown-content">


      </div>
    </div>


<a href="profile.htm"><img height="80px" width="80px" id="pp" /></a>
</div>

</div>
</div>
<div id="center">

</div>
<div id="right">
  <div id="ff">

  </div>
  <input id="usertype" placeholder="">
  <button id="post" onclick="posst();"> Post </button>
</div>
<div id="upright">
</div>
<div id="botright">
</div>
</div>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCQtXd25fQmP_6zV-mxSs64O_9y2J20iI4",
    authDomain: "poctest-c1a05.firebaseapp.com",
    databaseURL: "https://poctest-c1a05.firebaseio.com",
    projectId: "poctest-c1a05",
    storageBucket: "poctest-c1a05.appspot.com",
    messagingSenderId: "434071952145"
  };
  firebase.initializeApp(config);
</script>
</body>


</html>
